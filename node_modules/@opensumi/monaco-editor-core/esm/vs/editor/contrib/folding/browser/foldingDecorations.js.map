{"version":3,"sources":["vs/editor/contrib/folding/browser/foldingDecorations.ts"],"names":[],"mappings":"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","file":"foldingDecorations.js","sourceRoot":"file:///workspaces/monaco-editor-core/out-editor-esm","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../base/common/codicons';\nimport { ICodeEditor } from '../../../browser/editorBrowser';\nimport { IModelDecorationOptions, IModelDecorationsChangeAccessor, MinimapPosition, TrackedRangeStickiness } from '../../../common/model';\nimport { ModelDecorationOptions } from '../../../common/model/textModel';\nimport { IDecorationProvider } from './foldingModel';\nimport { localize } from '../../../../nls';\nimport { editorSelectionBackground, iconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService';\nimport { ThemeIcon } from '../../../../base/common/themables';\n\nconst foldBackground = registerColor('editor.foldBackground', { light: transparent(editorSelectionBackground, 0.3), dark: transparent(editorSelectionBackground, 0.3), hcDark: null, hcLight: null }, localize('foldBackgroundBackground', \"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations.\"), true);\nregisterColor('editorGutter.foldingControlForeground', { dark: iconForeground, light: iconForeground, hcDark: iconForeground, hcLight: iconForeground }, localize('editorGutter.foldingControlForeground', 'Color of the folding control in the editor gutter.'));\n\nexport const foldingExpandedIcon = registerIcon('folding-expanded', Codicon.chevronDown, localize('foldingExpandedIcon', 'Icon for expanded ranges in the editor glyph margin.'));\nexport const foldingCollapsedIcon = registerIcon('folding-collapsed', Codicon.chevronRight, localize('foldingCollapsedIcon', 'Icon for collapsed ranges in the editor glyph margin.'));\nexport const foldingManualCollapsedIcon = registerIcon('folding-manual-collapsed', foldingCollapsedIcon, localize('foldingManualCollapedIcon', 'Icon for manually collapsed ranges in the editor glyph margin.'));\nexport const foldingManualExpandedIcon = registerIcon('folding-manual-expanded', foldingExpandedIcon, localize('foldingManualExpandedIcon', 'Icon for manually expanded ranges in the editor glyph margin.'));\n\nconst foldedBackgroundMinimap = { color: themeColorFromId(foldBackground), position: MinimapPosition.Inline };\n\nconst collapsed = localize('linesCollapsed', \"Click to expand the range.\");\nconst expanded = localize('linesExpanded', \"Click to collapse the range.\");\n\nexport class FoldingDecorationProvider implements IDecorationProvider {\n\n\tprivate static readonly COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-collapsed-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon),\n\t});\n\n\tprivate static readonly COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-collapsed-highlighted-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tclassName: 'folded-background',\n\t\tminimap: foldedBackgroundMinimap,\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n\t});\n\n\tprivate static readonly MANUALLY_COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-manually-collapsed-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\n\t});\n\n\tprivate static readonly MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-manually-collapsed-highlighted-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tclassName: 'folded-background',\n\t\tminimap: foldedBackgroundMinimap,\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\n\t});\n\n\tprivate static readonly NO_CONTROLS_COLLAPSED_RANGE_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-no-controls-range-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t});\n\n\tprivate static readonly NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-no-controls-range-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tclassName: 'folded-background',\n\t\tminimap: foldedBackgroundMinimap,\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t});\n\n\tprivate static readonly EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-expanded-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tisWholeLine: true,\n\t\tfirstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon),\n\t\tlinesDecorationsTooltip: expanded,\n\t});\n\n\tprivate static readonly EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-expanded-auto-hide-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tisWholeLine: true,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingExpandedIcon),\n\t\tlinesDecorationsTooltip: expanded,\n\t});\n\n\tprivate static readonly MANUALLY_EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-manually-expanded-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tisWholeLine: true,\n\t\tfirstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingManualExpandedIcon),\n\t\tlinesDecorationsTooltip: expanded,\n\t});\n\n\tprivate static readonly MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-manually-expanded-auto-hide-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tisWholeLine: true,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingManualExpandedIcon),\n\t\tlinesDecorationsTooltip: expanded,\n\t});\n\n\tprivate static readonly NO_CONTROLS_EXPANDED_RANGE_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-no-controls-range-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tisWholeLine: true\n\t});\n\n\tprivate static readonly HIDDEN_RANGE_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-hidden-range-decoration',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n\t});\n\n\tpublic showFoldingControls: 'always' | 'never' | 'mouseover' = 'mouseover';\n\n\tpublic showFoldingHighlights: boolean = true;\n\n\tconstructor(private readonly editor: ICodeEditor) {\n\t}\n\n\tgetDecorationOption(isCollapsed: boolean, isHidden: boolean, isManual: boolean): IModelDecorationOptions {\n\t\tif (isHidden) { // is inside another collapsed region\n\t\t\treturn FoldingDecorationProvider.HIDDEN_RANGE_DECORATION;\n\t\t}\n\t\tif (this.showFoldingControls === 'never') {\n\t\t\tif (isCollapsed) {\n\t\t\t\treturn this.showFoldingHighlights ? FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION : FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_RANGE_DECORATION;\n\t\t\t}\n\t\t\treturn FoldingDecorationProvider.NO_CONTROLS_EXPANDED_RANGE_DECORATION;\n\t\t}\n\t\tif (isCollapsed) {\n\t\t\treturn isManual ?\n\t\t\t\t(this.showFoldingHighlights ? FoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION)\n\t\t\t\t: (this.showFoldingHighlights ? FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION);\n\t\t} else if (this.showFoldingControls === 'mouseover') {\n\t\t\treturn isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;\n\t\t} else {\n\t\t\treturn isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION;\n\t\t}\n\t}\n\n\tchangeDecorations<T>(callback: (changeAccessor: IModelDecorationsChangeAccessor) => T): T {\n\t\treturn this.editor.changeDecorations(callback);\n\t}\n\n\tremoveDecorations(decorationIds: string[]): void {\n\t\tthis.editor.removeDecorations(decorationIds);\n\t}\n}\n"]}
{"version":3,"sources":["vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.ts"],"names":[],"mappings":"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","file":"referencesWidget.js","sourceRoot":"file:///workspaces/monaco-editor-core/out-editor-esm","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../../base/browser/dom';\nimport { IMouseEvent } from '../../../../../base/browser/mouseEvent';\nimport { Orientation } from '../../../../../base/browser/ui/sash/sash';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview';\nimport { Color } from '../../../../../base/common/color';\nimport { Emitter, Event } from '../../../../../base/common/event';\nimport { FuzzyScore } from '../../../../../base/common/filters';\nimport { KeyCode } from '../../../../../base/common/keyCodes';\nimport { DisposableStore, dispose, IDisposable, IReference } from '../../../../../base/common/lifecycle';\nimport { Schemas } from '../../../../../base/common/network';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources';\nimport './referencesWidget.css';\nimport { ICodeEditor } from '../../../../browser/editorBrowser';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/embeddedCodeEditorWidget';\nimport { IEditorOptions } from '../../../../common/config/editorOptions';\nimport { IRange, Range } from '../../../../common/core/range';\nimport { ScrollType } from '../../../../common/editorCommon';\nimport { IModelDeltaDecoration, TrackedRangeStickiness } from '../../../../common/model';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel';\nimport { Location } from '../../../../common/languages';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry';\nimport { ILanguageService } from '../../../../common/languages/language';\nimport { ITextEditorModel, ITextModelService } from '../../../../common/services/resolverService';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider, TreeElement } from './referencesTree';\nimport * as peekView from '../../../peekView/browser/peekView';\nimport * as nls from '../../../../../nls';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding';\nimport { ILabelService } from '../../../../../platform/label/common/label';\nimport { IWorkbenchAsyncDataTreeOptions, WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService';\nimport { IColorTheme, IThemeService } from '../../../../../platform/theme/common/themeService';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel';\n\nclass DecorationsManager implements IDisposable {\n\n\tprivate static readonly DecorationOptions = ModelDecorationOptions.register({\n\t\tdescription: 'reference-decoration',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tclassName: 'reference-decoration'\n\t});\n\n\tprivate _decorations = new Map<string, OneReference>();\n\tprivate _decorationIgnoreSet = new Set<string>();\n\tprivate readonly _callOnDispose = new DisposableStore();\n\tprivate readonly _callOnModelChange = new DisposableStore();\n\n\tconstructor(private _editor: ICodeEditor, private _model: ReferencesModel) {\n\t\tthis._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n\t\tthis._onModelChanged();\n\t}\n\n\tdispose(): void {\n\t\tthis._callOnModelChange.dispose();\n\t\tthis._callOnDispose.dispose();\n\t\tthis.removeDecorations();\n\t}\n\n\tprivate _onModelChanged(): void {\n\t\tthis._callOnModelChange.clear();\n\t\tconst model = this._editor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const ref of this._model.references) {\n\t\t\tif (ref.uri.toString() === model.uri.toString()) {\n\t\t\t\tthis._addDecorations(ref.parent);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _addDecorations(reference: FileReferences): void {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tthis._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n\n\t\tconst newDecorations: IModelDeltaDecoration[] = [];\n\t\tconst newDecorationsActualIndex: number[] = [];\n\n\t\tfor (let i = 0, len = reference.children.length; i < len; i++) {\n\t\t\tconst oneReference = reference.children[i];\n\t\t\tif (this._decorationIgnoreSet.has(oneReference.id)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tnewDecorations.push({\n\t\t\t\trange: oneReference.range,\n\t\t\t\toptions: DecorationsManager.DecorationOptions\n\t\t\t});\n\t\t\tnewDecorationsActualIndex.push(i);\n\t\t}\n\n\t\tthis._editor.changeDecorations((changeAccessor) => {\n\t\t\tconst decorations = changeAccessor.deltaDecorations([], newDecorations);\n\t\t\tfor (let i = 0; i < decorations.length; i++) {\n\t\t\t\tthis._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _onDecorationChanged(): void {\n\t\tconst toRemove: string[] = [];\n\n\t\tconst model = this._editor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [decorationId, reference] of this._decorations) {\n\n\t\t\tconst newRange = model.getDecorationRange(decorationId);\n\n\t\t\tif (!newRange) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet ignore = false;\n\t\t\tif (Range.equalsRange(newRange, reference.range)) {\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif (Range.spansMultipleLines(newRange)) {\n\t\t\t\tignore = true;\n\n\t\t\t} else {\n\t\t\t\tconst lineLength = reference.range.endColumn - reference.range.startColumn;\n\t\t\t\tconst newLineLength = newRange.endColumn - newRange.startColumn;\n\n\t\t\t\tif (lineLength !== newLineLength) {\n\t\t\t\t\tignore = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ignore) {\n\t\t\t\tthis._decorationIgnoreSet.add(reference.id);\n\t\t\t\ttoRemove.push(decorationId);\n\t\t\t} else {\n\t\t\t\treference.range = newRange;\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0, len = toRemove.length; i < len; i++) {\n\t\t\tthis._decorations.delete(toRemove[i]);\n\t\t}\n\t\tthis._editor.removeDecorations(toRemove);\n\t}\n\n\tremoveDecorations(): void {\n\t\tthis._editor.removeDecorations([...this._decorations.keys()]);\n\t\tthis._decorations.clear();\n\t}\n}\n\nexport class LayoutData {\n\tratio: number = 0.7;\n\theightInLines: number = 18;\n\n\tstatic fromJSON(raw: string): LayoutData {\n\t\tlet ratio: number | undefined;\n\t\tlet heightInLines: number | undefined;\n\t\ttry {\n\t\t\tconst data = <LayoutData>JSON.parse(raw);\n\t\t\tratio = data.ratio;\n\t\t\theightInLines = data.heightInLines;\n\t\t} catch {\n\t\t\t//\n\t\t}\n\t\treturn {\n\t\t\tratio: ratio || 0.7,\n\t\t\theightInLines: heightInLines || 18\n\t\t};\n\t}\n}\n\nexport interface SelectionEvent {\n\treadonly kind: 'goto' | 'show' | 'side' | 'open';\n\treadonly source: 'editor' | 'tree' | 'title';\n\treadonly element?: Location;\n}\n\nclass ReferencesTree extends WorkbenchAsyncDataTree<ReferencesModel | FileReferences, TreeElement, FuzzyScore> { }\n\n/**\n * ZoneWidget that is shown inside the editor\n */\nexport class ReferenceWidget extends peekView.PeekViewWidget {\n\n\tprivate _model?: ReferencesModel;\n\tprivate _decorationsManager?: DecorationsManager;\n\n\tprivate readonly _disposeOnNewModel = new DisposableStore();\n\tprivate readonly _callOnDispose = new DisposableStore();\n\n\tprivate readonly _onDidSelectReference = new Emitter<SelectionEvent>();\n\treadonly onDidSelectReference = this._onDidSelectReference.event;\n\n\tprivate _tree!: ReferencesTree;\n\tprivate _treeContainer!: HTMLElement;\n\tprivate _splitView!: SplitView;\n\tprivate _preview!: ICodeEditor;\n\tprivate _previewModelReference!: IReference<ITextEditorModel>;\n\tprivate _previewNotAvailableMessage!: TextModel;\n\tprivate _previewContainer!: HTMLElement;\n\tprivate _messageContainer!: HTMLElement;\n\tprivate _dim = new dom.Dimension(0, 0);\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\tprivate _defaultTreeKeyboardSupport: boolean,\n\t\tpublic layoutData: LayoutData,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITextModelService private readonly _textModelResolverService: ITextModelService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@peekView.IPeekViewService private readonly _peekViewService: peekView.IPeekViewService,\n\t\t@ILabelService private readonly _uriLabel: ILabelService,\n\t\t@IUndoRedoService private readonly _undoRedoService: IUndoRedoService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@ILanguageConfigurationService private readonly _languageConfigurationService: ILanguageConfigurationService,\n\t) {\n\t\tsuper(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n\n\t\tthis._applyTheme(themeService.getColorTheme());\n\t\tthis._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n\t\tthis._peekViewService.addExclusiveWidget(editor, this);\n\t\tthis.create();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.setModel(undefined);\n\t\tthis._callOnDispose.dispose();\n\t\tthis._disposeOnNewModel.dispose();\n\t\tdispose(this._preview);\n\t\tdispose(this._previewNotAvailableMessage);\n\t\tdispose(this._tree);\n\t\tdispose(this._previewModelReference);\n\t\tthis._splitView.dispose();\n\t\tsuper.dispose();\n\t}\n\n\tprivate _applyTheme(theme: IColorTheme) {\n\t\tconst borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n\t\tthis.style({\n\t\t\tarrowColor: borderColor,\n\t\t\tframeColor: borderColor,\n\t\t\theaderBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n\t\t\tprimaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n\t\t\tsecondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n\t\t});\n\t}\n\n\toverride show(where: IRange) {\n\t\tsuper.show(where, this.layoutData.heightInLines || 18);\n\t}\n\n\tfocusOnReferenceTree(): void {\n\t\tthis._tree.domFocus();\n\t}\n\n\tfocusOnPreviewEditor(): void {\n\t\tthis._preview.focus();\n\t}\n\n\tisPreviewEditorFocused(): boolean {\n\t\treturn this._preview.hasTextFocus();\n\t}\n\n\tprotected override _onTitleClick(e: IMouseEvent): void {\n\t\tif (this._preview && this._preview.getModel()) {\n\t\t\tthis._onDidSelectReference.fire({\n\t\t\t\telement: this._getFocusedReference(),\n\t\t\t\tkind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n\t\t\t\tsource: 'title'\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _fillBody(containerElement: HTMLElement): void {\n\t\tthis.setCssClass('reference-zone-widget');\n\n\t\t// message pane\n\t\tthis._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n\t\tdom.hide(this._messageContainer);\n\n\t\tthis._splitView = new SplitView(containerElement, { orientation: Orientation.HORIZONTAL });\n\n\t\t// editor\n\t\tthis._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n\t\tconst options: IEditorOptions = {\n\t\t\tscrollBeyondLastLine: false,\n\t\t\tscrollbar: {\n\t\t\t\tverticalScrollbarSize: 14,\n\t\t\t\thorizontal: 'auto',\n\t\t\t\tuseShadows: true,\n\t\t\t\tverticalHasArrows: false,\n\t\t\t\thorizontalHasArrows: false,\n\t\t\t\talwaysConsumeMouseWheel: true\n\t\t\t},\n\t\t\toverviewRulerLanes: 2,\n\t\t\tfixedOverflowWidgets: true,\n\t\t\tminimap: {\n\t\t\t\tenabled: false\n\t\t\t}\n\t\t};\n\t\tthis._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, {}, this.editor);\n\t\tdom.hide(this._previewContainer);\n\t\tthis._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\n\n\t\t// tree\n\t\tthis._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n\t\tconst treeOptions: IWorkbenchAsyncDataTreeOptions<TreeElement, FuzzyScore> = {\n\t\t\tkeyboardSupport: this._defaultTreeKeyboardSupport,\n\t\t\taccessibilityProvider: new AccessibilityProvider(),\n\t\t\tkeyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n\t\t\tidentityProvider: new IdentityProvider(),\n\t\t\topenOnSingleClick: true,\n\t\t\tselectionNavigation: true,\n\t\t\toverrideStyles: {\n\t\t\t\tlistBackground: peekView.peekViewResultsBackground\n\t\t\t}\n\t\t};\n\t\tif (this._defaultTreeKeyboardSupport) {\n\t\t\t// the tree will consume `Escape` and prevent the widget from closing\n\t\t\tthis._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\n\t\t\t\tif (e.equals(KeyCode.Escape)) {\n\t\t\t\t\tthis._keybindingService.dispatchEvent(e, e.target);\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t}, true));\n\t\t}\n\t\tthis._tree = this._instantiationService.createInstance(\n\t\t\tReferencesTree,\n\t\t\t'ReferencesWidget',\n\t\t\tthis._treeContainer,\n\t\t\tnew Delegate(),\n\t\t\t[\n\t\t\t\tthis._instantiationService.createInstance(FileReferencesRenderer),\n\t\t\t\tthis._instantiationService.createInstance(OneReferenceRenderer),\n\t\t\t],\n\t\t\tthis._instantiationService.createInstance(DataSource),\n\t\t\ttreeOptions,\n\t\t);\n\n\t\t// split stuff\n\t\tthis._splitView.addView({\n\t\t\tonDidChange: Event.None,\n\t\t\telement: this._previewContainer,\n\t\t\tminimumSize: 200,\n\t\t\tmaximumSize: Number.MAX_VALUE,\n\t\t\tlayout: (width) => {\n\t\t\t\tthis._preview.layout({ height: this._dim.height, width });\n\t\t\t}\n\t\t}, Sizing.Distribute);\n\n\t\tthis._splitView.addView({\n\t\t\tonDidChange: Event.None,\n\t\t\telement: this._treeContainer,\n\t\t\tminimumSize: 100,\n\t\t\tmaximumSize: Number.MAX_VALUE,\n\t\t\tlayout: (width) => {\n\t\t\t\tthis._treeContainer.style.height = `${this._dim.height}px`;\n\t\t\t\tthis._treeContainer.style.width = `${width}px`;\n\t\t\t\tthis._tree.layout(this._dim.height, width);\n\t\t\t}\n\t\t}, Sizing.Distribute);\n\n\t\tthis._disposables.add(this._splitView.onDidSashChange(() => {\n\t\t\tif (this._dim.width) {\n\t\t\t\tthis.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n\t\t\t}\n\t\t}, undefined));\n\n\t\t// listen on selection and focus\n\t\tconst onEvent = (element: any, kind: 'show' | 'goto' | 'side') => {\n\t\t\tif (element instanceof OneReference) {\n\t\t\t\tif (kind === 'show') {\n\t\t\t\t\tthis._revealReference(element, false);\n\t\t\t\t}\n\t\t\t\tthis._onDidSelectReference.fire({ element, kind, source: 'tree' });\n\t\t\t}\n\t\t};\n\t\tthis._tree.onDidOpen(e => {\n\t\t\tif (e.sideBySide) {\n\t\t\t\tonEvent(e.element, 'side');\n\t\t\t} else if (e.editorOptions.pinned) {\n\t\t\t\tonEvent(e.element, 'goto');\n\t\t\t} else {\n\t\t\t\tonEvent(e.element, 'show');\n\t\t\t}\n\t\t});\n\n\t\tdom.hide(this._treeContainer);\n\t}\n\n\tprotected override _onWidth(width: number) {\n\t\tif (this._dim) {\n\t\t\tthis._doLayoutBody(this._dim.height, width);\n\t\t}\n\t}\n\n\tprotected override _doLayoutBody(heightInPixel: number, widthInPixel: number): void {\n\t\tsuper._doLayoutBody(heightInPixel, widthInPixel);\n\t\tthis._dim = new dom.Dimension(widthInPixel, heightInPixel);\n\t\tthis.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n\t\tthis._splitView.layout(widthInPixel);\n\t\tthis._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n\t}\n\n\tsetSelection(selection: OneReference): Promise<any> {\n\t\treturn this._revealReference(selection, true).then(() => {\n\t\t\tif (!this._model) {\n\t\t\t\t// disposed\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// show in tree\n\t\t\tthis._tree.setSelection([selection]);\n\t\t\tthis._tree.setFocus([selection]);\n\t\t});\n\t}\n\n\tsetModel(newModel: ReferencesModel | undefined): Promise<any> {\n\t\t// clean up\n\t\tthis._disposeOnNewModel.clear();\n\t\tthis._model = newModel;\n\t\tif (this._model) {\n\t\t\treturn this._onNewModel();\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\tprivate _onNewModel(): Promise<any> {\n\t\tif (!this._model) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tif (this._model.isEmpty) {\n\t\t\tthis.setTitle('');\n\t\t\tthis._messageContainer.innerText = nls.localize('noResults', \"No results\");\n\t\t\tdom.show(this._messageContainer);\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tdom.hide(this._messageContainer);\n\t\tthis._decorationsManager = new DecorationsManager(this._preview, this._model);\n\t\tthis._disposeOnNewModel.add(this._decorationsManager);\n\n\t\t// listen on model changes\n\t\tthis._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n\n\t\t// listen on editor\n\t\tthis._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n\t\t\tconst { event, target } = e;\n\t\t\tif (event.detail !== 2) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst element = this._getFocusedReference();\n\t\t\tif (!element) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._onDidSelectReference.fire({\n\t\t\t\telement: { uri: element.uri, range: target.range! },\n\t\t\t\tkind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\n\t\t\t\tsource: 'editor'\n\t\t\t});\n\t\t}));\n\n\t\t// make sure things are rendered\n\t\tthis.container!.classList.add('results-loaded');\n\t\tdom.show(this._treeContainer);\n\t\tdom.show(this._previewContainer);\n\t\tthis._splitView.layout(this._dim.width);\n\t\tthis.focusOnReferenceTree();\n\n\t\t// pick input and a reference to begin with\n\t\treturn this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n\t}\n\n\tprivate _getFocusedReference(): OneReference | undefined {\n\t\tconst [element] = this._tree.getFocus();\n\t\tif (element instanceof OneReference) {\n\t\t\treturn element;\n\t\t} else if (element instanceof FileReferences) {\n\t\t\tif (element.children.length > 0) {\n\t\t\t\treturn element.children[0];\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync revealReference(reference: OneReference): Promise<void> {\n\t\tawait this._revealReference(reference, false);\n\t\tthis._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\n\t}\n\n\tprivate _revealedReference?: OneReference;\n\n\tprivate async _revealReference(reference: OneReference, revealParent: boolean): Promise<void> {\n\n\t\t// check if there is anything to do...\n\t\tif (this._revealedReference === reference) {\n\t\t\treturn;\n\t\t}\n\t\tthis._revealedReference = reference;\n\n\t\t// Update widget header\n\t\tif (reference.uri.scheme !== Schemas.inMemory) {\n\t\t\tthis.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n\t\t} else {\n\t\t\tthis.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n\t\t}\n\n\t\tconst promise = this._textModelResolverService.createModelReference(reference.uri);\n\n\t\tif (this._tree.getInput() === reference.parent) {\n\t\t\tthis._tree.reveal(reference);\n\t\t} else {\n\t\t\tif (revealParent) {\n\t\t\t\tthis._tree.reveal(reference.parent);\n\t\t\t}\n\t\t\tawait this._tree.expand(reference.parent);\n\t\t\tthis._tree.reveal(reference);\n\t\t}\n\n\t\tconst ref = await promise;\n\n\t\tif (!this._model) {\n\t\t\t// disposed\n\t\t\tref.dispose();\n\t\t\treturn;\n\t\t}\n\n\t\tdispose(this._previewModelReference);\n\n\t\t// show in editor\n\t\tconst model = ref.object;\n\t\tif (model) {\n\t\t\tconst scrollType = this._preview.getModel() === model.textEditorModel ? ScrollType.Smooth : ScrollType.Immediate;\n\t\t\tconst sel = Range.lift(reference.range).collapseToStart();\n\t\t\tthis._previewModelReference = ref;\n\t\t\tthis._preview.setModel(model.textEditorModel);\n\t\t\tthis._preview.setSelection(sel);\n\t\t\tthis._preview.revealRangeInCenter(sel, scrollType);\n\t\t} else {\n\t\t\tthis._preview.setModel(this._previewNotAvailableMessage);\n\t\t\tref.dispose();\n\t\t}\n\t}\n}\n"]}
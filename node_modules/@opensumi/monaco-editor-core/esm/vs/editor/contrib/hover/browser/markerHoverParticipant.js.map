{"version":3,"sources":["vs/editor/contrib/hover/browser/markerHoverParticipant.ts"],"names":[],"mappings":"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","file":"markerHoverParticipant.js","sourceRoot":"file:///workspaces/monaco-editor-core/out-editor-esm","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom';\nimport { isNonEmptyArray } from '../../../../base/common/arrays';\nimport { CancelablePromise, createCancelablePromise, disposableTimeout } from '../../../../base/common/async';\nimport { onUnexpectedError } from '../../../../base/common/errors';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from '../../../../base/common/lifecycle';\nimport { basename } from '../../../../base/common/resources';\nimport { ICodeEditor } from '../../../browser/editorBrowser';\nimport { EditorOption } from '../../../common/config/editorOptions';\nimport { Range } from '../../../common/core/range';\nimport { CodeActionTriggerType } from '../../../common/languages';\nimport { IModelDecoration } from '../../../common/model';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures';\nimport { IMarkerDecorationsService } from '../../../common/services/markerDecorations';\nimport { getCodeActions, quickFixCommandId } from '../../codeAction/browser/codeAction';\nimport { CodeActionController } from '../../codeAction/browser/codeActionController';\nimport { CodeActionKind, CodeActionSet, CodeActionTrigger, CodeActionTriggerSource } from '../../codeAction/common/types';\nimport { MarkerController, NextMarkerAction } from '../../gotoError/browser/gotoError';\nimport { HoverAnchor, HoverAnchorType, IEditorHoverParticipant, IEditorHoverRenderContext, IHoverPart } from './hoverTypes';\nimport * as nls from '../../../../nls';\nimport { ITextEditorOptions } from '../../../../platform/editor/common/editor';\nimport { IMarker, IMarkerData, MarkerSeverity } from '../../../../platform/markers/common/markers';\nimport { IOpenerService } from '../../../../platform/opener/common/opener';\nimport { Progress } from '../../../../platform/progress/common/progress';\n\nconst $ = dom.$;\n\nexport class MarkerHover implements IHoverPart {\n\n\tconstructor(\n\t\tpublic readonly owner: IEditorHoverParticipant<MarkerHover>,\n\t\tpublic readonly range: Range,\n\t\tpublic readonly marker: IMarker,\n\t) { }\n\n\tpublic isValidForHoverAnchor(anchor: HoverAnchor): boolean {\n\t\treturn (\n\t\t\tanchor.type === HoverAnchorType.Range\n\t\t\t&& this.range.startColumn <= anchor.range.startColumn\n\t\t\t&& this.range.endColumn >= anchor.range.endColumn\n\t\t);\n\t}\n}\n\nconst markerCodeActionTrigger: CodeActionTrigger = {\n\ttype: CodeActionTriggerType.Invoke,\n\tfilter: { include: CodeActionKind.QuickFix },\n\ttriggerAction: CodeActionTriggerSource.QuickFixHover\n};\n\nexport class MarkerHoverParticipant implements IEditorHoverParticipant<MarkerHover> {\n\n\tpublic readonly hoverOrdinal: number = 1;\n\n\tprivate recentMarkerCodeActionsInfo: { marker: IMarker; hasCodeActions: boolean } | undefined = undefined;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IMarkerDecorationsService private readonly _markerDecorationsService: IMarkerDecorationsService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@ILanguageFeaturesService private readonly _languageFeaturesService: ILanguageFeaturesService,\n\t) { }\n\n\tpublic computeSync(anchor: HoverAnchor, lineDecorations: IModelDecoration[]): MarkerHover[] {\n\t\tif (!this._editor.hasModel() || anchor.type !== HoverAnchorType.Range && !anchor.supportsMarkerHover) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst model = this._editor.getModel();\n\t\tconst lineNumber = anchor.range.startLineNumber;\n\t\tconst maxColumn = model.getLineMaxColumn(lineNumber);\n\t\tconst result: MarkerHover[] = [];\n\t\tfor (const d of lineDecorations) {\n\t\t\tconst startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n\t\t\tconst endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n\n\t\t\tconst marker = this._markerDecorationsService.getMarker(model.uri, d);\n\t\t\tif (!marker) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n\t\t\tresult.push(new MarkerHover(this, range, marker));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic renderHoverParts(context: IEditorHoverRenderContext, hoverParts: MarkerHover[]): IDisposable {\n\t\tif (!hoverParts.length) {\n\t\t\treturn Disposable.None;\n\t\t}\n\t\tconst disposables = new DisposableStore();\n\t\thoverParts.forEach(msg => context.fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n\t\tconst markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n\t\tthis.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\n\t\treturn disposables;\n\t}\n\n\tprivate renderMarkerHover(markerHover: MarkerHover, disposables: DisposableStore): HTMLElement {\n\t\tconst hoverElement = $('div.hover-row');\n\t\tconst markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n\t\tconst { source, message, code, relatedInformation } = markerHover.marker;\n\n\t\tthis._editor.applyFontInfo(markerElement);\n\t\tconst messageElement = dom.append(markerElement, $('span'));\n\t\tmessageElement.style.whiteSpace = 'pre-wrap';\n\t\tmessageElement.innerText = message;\n\n\t\tif (source || code) {\n\t\t\t// Code has link\n\t\t\tif (code && typeof code !== 'string') {\n\t\t\t\tconst sourceAndCodeElement = $('span');\n\t\t\t\tif (source) {\n\t\t\t\t\tconst sourceElement = dom.append(sourceAndCodeElement, $('span'));\n\t\t\t\t\tsourceElement.innerText = source;\n\t\t\t\t}\n\t\t\t\tconst codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n\t\t\t\tcodeLink.setAttribute('href', code.target.toString());\n\n\t\t\t\tdisposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\n\t\t\t\t\tthis._openerService.open(code.target, { allowCommands: true });\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}));\n\n\t\t\t\tconst codeElement = dom.append(codeLink, $('span'));\n\t\t\t\tcodeElement.innerText = code.value;\n\n\t\t\t\tconst detailsElement = dom.append(markerElement, sourceAndCodeElement);\n\t\t\t\tdetailsElement.style.opacity = '0.6';\n\t\t\t\tdetailsElement.style.paddingLeft = '6px';\n\t\t\t} else {\n\t\t\t\tconst detailsElement = dom.append(markerElement, $('span'));\n\t\t\t\tdetailsElement.style.opacity = '0.6';\n\t\t\t\tdetailsElement.style.paddingLeft = '6px';\n\t\t\t\tdetailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n\t\t\t}\n\t\t}\n\n\t\tif (isNonEmptyArray(relatedInformation)) {\n\t\t\tfor (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\n\t\t\t\tconst relatedInfoContainer = dom.append(markerElement, $('div'));\n\t\t\t\trelatedInfoContainer.style.marginTop = '8px';\n\t\t\t\tconst a = dom.append(relatedInfoContainer, $('a'));\n\t\t\t\ta.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n\t\t\t\ta.style.cursor = 'pointer';\n\t\t\t\tdisposables.add(dom.addDisposableListener(a, 'click', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (this._openerService) {\n\t\t\t\t\t\tthis._openerService.open(resource, {\n\t\t\t\t\t\t\tfromUserGesture: true,\n\t\t\t\t\t\t\teditorOptions: <ITextEditorOptions>{ selection: { startLineNumber, startColumn } }\n\t\t\t\t\t\t}).catch(onUnexpectedError);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tconst messageElement = dom.append<HTMLAnchorElement>(relatedInfoContainer, $('span'));\n\t\t\t\tmessageElement.innerText = message;\n\t\t\t\tthis._editor.applyFontInfo(messageElement);\n\t\t\t}\n\t\t}\n\n\t\treturn hoverElement;\n\t}\n\n\tprivate renderMarkerStatusbar(context: IEditorHoverRenderContext, markerHover: MarkerHover, disposables: DisposableStore): void {\n\t\tif (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n\t\t\tconst markerController = MarkerController.get(this._editor);\n\t\t\tif (markerController) {\n\t\t\t\tcontext.statusBar.addAction({\n\t\t\t\t\tlabel: nls.localize('view problem', \"View Problem\"),\n\t\t\t\t\tcommandId: NextMarkerAction.ID,\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\tcontext.hide();\n\t\t\t\t\t\tmarkerController.showAtMarker(markerHover.marker);\n\t\t\t\t\t\tthis._editor.focus();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (!this._editor.getOption(EditorOption.readOnly)) {\n\t\t\tconst quickfixPlaceholderElement = context.statusBar.append($('div'));\n\t\t\tif (this.recentMarkerCodeActionsInfo) {\n\t\t\t\tif (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n\t\t\t\t\tif (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n\t\t\t\t\t\tquickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.recentMarkerCodeActionsInfo = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200, disposables);\n\t\t\tif (!quickfixPlaceholderElement.textContent) {\n\t\t\t\t// Have some content in here to avoid flickering\n\t\t\t\tquickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n\t\t\t}\n\t\t\tconst codeActionsPromise = this.getCodeActions(markerHover.marker);\n\t\t\tdisposables.add(toDisposable(() => codeActionsPromise.cancel()));\n\t\t\tcodeActionsPromise.then(actions => {\n\t\t\t\tupdatePlaceholderDisposable.dispose();\n\t\t\t\tthis.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\n\n\t\t\t\tif (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n\t\t\t\t\tactions.dispose();\n\t\t\t\t\tquickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tquickfixPlaceholderElement.style.display = 'none';\n\n\t\t\t\tlet showing = false;\n\t\t\t\tdisposables.add(toDisposable(() => {\n\t\t\t\t\tif (!showing) {\n\t\t\t\t\t\tactions.dispose();\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tcontext.statusBar.addAction({\n\t\t\t\t\tlabel: nls.localize('quick fixes', \"Quick Fix...\"),\n\t\t\t\t\tcommandId: quickFixCommandId,\n\t\t\t\t\trun: (target) => {\n\t\t\t\t\t\tshowing = true;\n\t\t\t\t\t\tconst controller = CodeActionController.get(this._editor);\n\t\t\t\t\t\tconst elementPosition = dom.getDomNodePagePosition(target);\n\t\t\t\t\t\t// Hide the hover pre-emptively, otherwise the editor can close the code actions\n\t\t\t\t\t\t// context menu as well when using keyboard navigation\n\t\t\t\t\t\tcontext.hide();\n\t\t\t\t\t\tcontroller?.showCodeActions(markerCodeActionTrigger, actions, {\n\t\t\t\t\t\t\tx: elementPosition.left,\n\t\t\t\t\t\t\ty: elementPosition.top,\n\t\t\t\t\t\t\twidth: elementPosition.width,\n\t\t\t\t\t\t\theight: elementPosition.height\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, onUnexpectedError);\n\t\t}\n\t}\n\n\tprivate getCodeActions(marker: IMarker): CancelablePromise<CodeActionSet> {\n\t\treturn createCancelablePromise(cancellationToken => {\n\t\t\treturn getCodeActions(\n\t\t\t\tthis._languageFeaturesService.codeActionProvider,\n\t\t\t\tthis._editor.getModel()!,\n\t\t\t\tnew Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn),\n\t\t\t\tmarkerCodeActionTrigger,\n\t\t\t\tProgress.None,\n\t\t\t\tcancellationToken);\n\t\t});\n\t}\n}\n"]}
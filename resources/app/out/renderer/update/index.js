(()=>{var e,t={77373:e=>{e.exports={container:"container___Q59dH",error:"error____7jse",icon:"icon___KPvbl",body:"body___flZXE",title:"title___DMcqu",subtitle:"subtitle___Phs1x",changelogTitle:"changelogTitle___oDJd9",pageLoading:"pageLoading___y7hA_",changelog:"changelog___Y8oHh",footer:"footer____0IcZ",installBtn:"installBtn___XgqrL",progress:"progress___osFLx"}},40961:(e,t,r)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(22551)},96540:(e,t,r)=>{"use strict";e.exports=r(15287)},23351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateView=void 0;const a=r(8674),o=r(84157),l=a.__importStar(r(96540)),n=r(90163),i=a.__importDefault(r(79925)),d=a.__importDefault(r(77373)),c=r(63730);t.UpdateView=()=>{const[e,t]=(0,l.useState)(),[r,a]=(0,l.useState)(null),[s,u]=(0,l.useState)(null),p=(0,l.useMemo)((()=>{const t=e?.releaseNotes;if(!t)return"";const r=Array.isArray(t)?t[0]?.note:t;return(0,n.marked)(r||"无更新日志")}),[e]),_=(0,l.useMemo)((()=>(r?.percent||0).toFixed(2)),[r]);return(0,l.useEffect)((()=>{o.ipcRenderer.invoke(c.IPC_CHANNEL.initialState).then((e=>{u(e.updateState),a(e.progressInfo),t(e.updateInfo)})).catch((()=>{t(null)})),o.ipcRenderer.on(c.IPC_CHANNEL.eventData,((e,t)=>{"download-progress"===t.event?a(t.data):"error"===t.event&&u(c.UpdateState.UpdateError)}))}),[]),void 0===e?null:null===e?l.default.createElement("div",{className:`${d.default.container} ${d.default.error}`},"获取更新信息失败，请稍后重试"):l.default.createElement("div",{className:d.default.container},l.default.createElement("div",{className:d.default.icon},l.default.createElement("img",{src:i.default,alt:"logo"})),l.default.createElement("div",{className:d.default.body},l.default.createElement("div",{className:d.default.title},"Inkwell IDE 有新版本更新"),l.default.createElement("div",{className:d.default.subtitle},"Inkwell IDE ",e.version," 可供下载，您现在的版本是 ",process.env.IDE_VERSION,"。"),l.default.createElement("div",{className:d.default.changelogTitle},"更新日志："),l.default.createElement("div",{className:d.default.changelog,dangerouslySetInnerHTML:{__html:p},onClickCapture:e=>{const t=e.target;t&&"A"===t.tagName&&t.href&&(o.shell.openExternal(t.href),e.preventDefault())}}),l.default.createElement("div",{className:d.default.footer},l.default.createElement("div",{className:`${d.default.progress} ${s===c.UpdateState.DownloadError||s===c.UpdateState.UpdateError?d.default.error:""}`},s===c.UpdateState.Downloading?`正在下载更新 (${_}%) ...`:"",s===c.UpdateState.Downloaded?"下载完成，准备重启":"",s===c.UpdateState.DownloadError?"下载失败，请稍后重试":"",s===c.UpdateState.UpdateError?"更新失败，请稍后重试":""),l.default.createElement("div",{className:d.default.btn},l.default.createElement("button",{onClick:()=>{o.ipcRenderer.send(c.IPC_CHANNEL.ignoreVersion)}},"跳过此版本"),l.default.createElement("button",{className:d.default.installBtn,disabled:s===c.UpdateState.Downloading||s===c.UpdateState.Downloaded,onClick:async()=>{u(c.UpdateState.Downloading);try{await o.ipcRenderer.invoke(c.IPC_CHANNEL.downloadAndInstall),u(c.UpdateState.Downloaded)}catch{u(c.UpdateState.DownloadError)}}},"安装更新并重启")))))}},14919:(e,t,r)=>{"use strict";const a=r(8674).__importDefault(r(96540)),o=r(5338),l=r(23351);(0,o.createRoot)(document.getElementById("main")).render(a.default.createElement(l.UpdateView,null))},84157:e=>{"use strict";e.exports=require("electron")}},r={};function a(e){var o=r[e];if(void 0!==o)return o.exports;var l=r[e]={exports:{}};return t[e].call(l.exports,l,l.exports,a),l.exports}a.m=t,e=[],a.O=(t,r,o,l)=>{if(!r){var n=1/0;for(s=0;s<e.length;s++){for(var[r,o,l]=e[s],i=!0,d=0;d<r.length;d++)(!1&l||n>=l)&&Object.keys(a.O).every((e=>a.O[e](r[d])))?r.splice(d--,1):(i=!1,l<n&&(n=l));if(i){e.splice(s--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[r,o,l]},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e+"../"})(),(()=>{var e={348:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var o,l,[n,i,d]=r,c=0;if(n.some((t=>0!==e[t]))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(d)var s=d(a)}for(t&&t(r);c<n.length;c++)l=n[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(s)},r=global.webpackChunkInkwell_IDE=global.webpackChunkInkwell_IDE||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=a.O(void 0,[121],(()=>a(14919)));o=a.O(o)})();